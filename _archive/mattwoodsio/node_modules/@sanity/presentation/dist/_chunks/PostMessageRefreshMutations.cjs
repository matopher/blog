"use strict";var e=require("react/jsx-runtime"),n=require("react"),t=require("sanity");function r(e){const{channel:t,draft:r,published:l,livePreviewEnabled:u}=e,[o,s]=n.useState(r),[d,a]=n.useState(l);return n.useEffect((()=>{(null==o?void 0:o._rev)!==(null==r?void 0:r._rev)&&(n.startTransition((()=>s(r))),r&&(null==t||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:u,document:i(r)}))),(null==d?void 0:d._rev)!==(null==l?void 0:l._rev)&&(n.startTransition((()=>a(l))),l&&(null==t||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:u,document:i(l)})))}),[t,r,u,null==o?void 0:o._rev,null==d?void 0:d._rev,l]),null}function i(e){const{_id:n,_type:t,_rev:r,slug:i}=e;return{_id:n,_type:t,_rev:r,slug:i}}var l=n.memo((function(i){const{channel:l,type:u,previewKitConnection:o,loadersConnection:s}=i,d=n.useMemo((()=>t.getPublishedId(i.id)),[i.id]),{draft:a,published:v,ready:c}=t.useEditState(d,u,"low"),_="connected"===o||"connected"===s;return c&&a||v?e.jsx(r,{channel:l,draft:a,livePreviewEnabled:_,published:v},d):null}));exports.default=l;//# sourceMappingURL=PostMessageRefreshMutations.cjs.map
