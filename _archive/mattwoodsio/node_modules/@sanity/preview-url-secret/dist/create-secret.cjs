"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@sanity/uuid"),t=require("./_chunks/constants.cjs");exports.createPreviewSecret=async function(r,a,n,c,i=e.uuid()){const o=r.withConfig({apiVersion:t.a});try{const e=new Date(Date.now()+1e3*t.S),r=`${t.s}.${i}`,s=function(){if(typeof crypto<"u"){const e=new Uint8Array(16);crypto.getRandomValues(e);let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t=btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),t}return Math.random().toString(36).slice(2)}(),u=o.patch(r).set({secret:s,source:a,studioUrl:n,userId:c});return await o.transaction().createOrReplace({_id:r,_type:t.c}).patch(u).commit({tag:t.t}),{secret:s,expiresAt:e}}finally{await o.delete({query:t.d})}};//# sourceMappingURL=create-secret.cjs.map
