"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("sanity"),t=require("./_chunks/constants.cjs"),i=require("@sanity/icons");const n=e.defineType({type:"document",icon:i.LockIcon,name:t.c,title:"@sanity/preview-url-secret",readOnly:!0,fields:[{type:"string",name:"secret",title:"Secret"},{type:"string",name:"source",title:"Source Tool"},{type:"string",name:"studioUrl",title:"Studio URL"},{type:"string",name:"userId",title:"Sanity User ID"}],preview:{select:{source:"source",studioUrl:"studioUrl",updatedAt:"_updatedAt"},prepare(e){const n=e.studioUrl?new URL(e.studioUrl,location.origin):void 0,s=new Date(e.updatedAt).getTime(),r=new Date(s+1e3*t.S),c=r<new Date,o=c?i.CloseCircleIcon:i.CheckmarkCircleIcon;return{title:n?`${n.host}${n.pathname}`:e.source,subtitle:c?"Expired":`Expires in ${Math.round((r.getTime()-Date.now())/6e4)} minutes`,media:o}}}}),s=e.definePlugin((()=>({name:"sanity-plugin-debug-secrets",schema:{types:[n]},document:{actions:(e,i)=>i.schemaType!==t.c?e:e.filter((({action:e})=>"delete"===e)),inspectors:(e,i)=>i.documentType!==t.c?e:[],unstable_fieldActions:(e,i)=>i.schemaType.name!==t.c?e:[]}})));exports.debugSecrets=s;//# sourceMappingURL=sanity-plugin-debug-secrets.cjs.map
