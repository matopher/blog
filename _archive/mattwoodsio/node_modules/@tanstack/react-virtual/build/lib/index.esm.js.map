{"version":3,"file":"index.esm.js","sources":["../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport {\n  elementScroll,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  PartialKeys,\n  Virtualizer,\n  VirtualizerOptions,\n  windowScroll,\n} from '@tanstack/virtual-core'\nexport * from '@tanstack/virtual-core'\n\n//\n\nconst useIsomorphicLayoutEffect =\n  typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\nfunction useVirtualizerBase<\n  TScrollElement extends Element | Window,\n  TItemElement extends Element,\n>(\n  options: VirtualizerOptions<TScrollElement, TItemElement>,\n): Virtualizer<TScrollElement, TItemElement> {\n  const rerender = React.useReducer(() => ({}), {})[1]\n\n  const resolvedOptions: VirtualizerOptions<TScrollElement, TItemElement> = {\n    ...options,\n    onChange: (instance) => {\n      rerender()\n      options.onChange?.(instance)\n    },\n  }\n\n  const [instance] = React.useState(\n    () => new Virtualizer<TScrollElement, TItemElement>(resolvedOptions),\n  )\n\n  instance.setOptions(resolvedOptions)\n\n  React.useEffect(() => {\n    return instance._didMount()\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate()\n  })\n\n  return instance\n}\n\nexport function useVirtualizer<\n  TScrollElement extends Element,\n  TItemElement extends Element,\n>(\n  options: PartialKeys<\n    VirtualizerOptions<TScrollElement, TItemElement>,\n    'observeElementRect' | 'observeElementOffset' | 'scrollToFn'\n  >,\n): Virtualizer<TScrollElement, TItemElement> {\n  return useVirtualizerBase<TScrollElement, TItemElement>({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options,\n  })\n}\n\nexport function useWindowVirtualizer<TItemElement extends Element>(\n  options: PartialKeys<\n    VirtualizerOptions<Window, TItemElement>,\n    | 'getScrollElement'\n    | 'observeElementRect'\n    | 'observeElementOffset'\n    | 'scrollToFn'\n  >,\n): Virtualizer<Window, TItemElement> {\n  return useVirtualizerBase<Window, TItemElement>({\n    getScrollElement: () => (typeof document !== 'undefined' ? window : null),\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    ...options,\n  })\n}\n"],"names":["useIsomorphicLayoutEffect","document","React","useLayoutEffect","useEffect","useVirtualizerBase","options","rerender","useReducer","resolvedOptions","onChange","instance","useState","Virtualizer","setOptions","_didMount","_willUpdate","useVirtualizer","observeElementRect","observeElementOffset","scrollToFn","elementScroll","useWindowVirtualizer","getScrollElement","window","observeWindowRect","observeWindowOffset","windowScroll"],"mappings":";;;;;;;;;;;;;;;AAcA;;AAEA,IAAMA,yBAAyB,GAC7B,OAAOC,QAAQ,KAAK,WAAW,GAAGC,KAAK,CAACC,eAAe,GAAGD,KAAK,CAACE,SAAS,CAAA;AAE3E,SAASC,kBAAkB,CAIzBC,OAAyD,EACd;AAC3C,EAAA,IAAMC,QAAQ,GAAGL,KAAK,CAACM,UAAU,CAAC,YAAA;AAAA,IAAA,OAAO,EAAE,CAAA;AAAA,GAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;EAEpD,IAAMC,eAAiE,gBAClEH,OAAO,EAAA;IACVI,QAAQ,EAAE,SAACC,QAAAA,CAAAA,QAAQ,EAAK;AACtBJ,MAAAA,QAAQ,EAAE,CAAA;MACVD,OAAO,CAACI,QAAQ,IAAhBJ,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,OAAO,CAACI,QAAQ,CAAGC,QAAQ,CAAC,CAAA;AAC9B,KAAA;GACD,CAAA,CAAA;EAED,IAAmBT,eAAAA,GAAAA,KAAK,CAACU,QAAQ,CAC/B,YAAA;AAAA,MAAA,OAAM,IAAIC,WAAW,CAA+BJ,eAAe,CAAC,CAAA;KACrE,CAAA;IAFME,QAAQ,GAAA,eAAA,CAAA,CAAA,CAAA,CAAA;AAIfA,EAAAA,QAAQ,CAACG,UAAU,CAACL,eAAe,CAAC,CAAA;EAEpCP,KAAK,CAACE,SAAS,CAAC,YAAM;IACpB,OAAOO,QAAQ,CAACI,SAAS,EAAE,CAAA;GAC5B,EAAE,EAAE,CAAC,CAAA;AAENf,EAAAA,yBAAyB,CAAC,YAAM;IAC9B,OAAOW,QAAQ,CAACK,WAAW,EAAE,CAAA;AAC/B,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOL,QAAQ,CAAA;AACjB,CAAA;AAEO,SAASM,cAAc,CAI5BX,OAGC,EAC0C;AAC3C,EAAA,OAAOD,kBAAkB,CAAA,QAAA,CAAA;AACvBa,IAAAA,kBAAkB,EAAEA,kBAAkB;AACtCC,IAAAA,oBAAoB,EAAEA,oBAAoB;AAC1CC,IAAAA,UAAU,EAAEC,aAAAA;AAAa,GAAA,EACtBf,OAAO,CACV,CAAA,CAAA;AACJ,CAAA;AAEO,SAASgB,oBAAoB,CAClChB,OAMC,EACkC;AACnC,EAAA,OAAOD,kBAAkB,CAAA,QAAA,CAAA;AACvBkB,IAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAA;AAAA,MAAA,OAAO,OAAOtB,QAAQ,KAAK,WAAW,GAAGuB,MAAM,GAAG,IAAI,CAAA;KAAC;AACzEN,IAAAA,kBAAkB,EAAEO,iBAAiB;AACrCN,IAAAA,oBAAoB,EAAEO,mBAAmB;AACzCN,IAAAA,UAAU,EAAEO,YAAAA;AAAY,GAAA,EACrBrB,OAAO,CACV,CAAA,CAAA;AACJ;;;;"}